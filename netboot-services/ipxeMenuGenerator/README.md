# IPXE Menu Generator

This container consumes the [caching_server_list.json](../cachingServerFetcher/caching_server_list.json) that is generated by the caching-server-fetcher and produces IPXE menus for each caching server. Every caching server boots via network and therefore needs a MAC specific IPXE file on the netboot server. MAC specific files need to be named accordingly to be picked up: e.g. `MAC-1c697aa2fcde.ipxe`. The MAC specific booting can be done in IPXE using `chain --autofree tftp://${next-server}/MAC-${mac:hexraw}.ipxe`. This line has to be present in the menu.ipxe which is booted by the [initial-bootloader](../../initial-bootloader/custom.ipxe).

The script [buildIpxeMacMenus.sh](buildIpxeMacMenus.sh) expects the menus folder to be mounted to `/work/menus` and moves the generated IPXE menus to this folder.

The kernel version used for the caching servers is described with the file `kernels/caching-server-kernel-version.json` on the netboot server. This requires the kernel to be present in the respective folder as well, otherwise the boot will fail.

## Caching-Server

The cachingserver Image is added here preemptively, so that an easy setup is possible. Without the option to boot the caching-server image from the default netboot-server, the new caching-server cannot boot into the os, as it looks for a file on local disk.

The values are currently set manually.
